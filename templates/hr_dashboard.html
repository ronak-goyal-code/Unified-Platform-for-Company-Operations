<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HR</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,500;0,600;0,700;0,800;1,600&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@48,400,0,0"
    />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,500;0,600;0,700;0,800;1,600&display=swap");

      /* variables */

      :root {
        --clr-primary: #7380ec;
        --clr-danger: #ff7782;
        --clr-success: #41f1b6;
        --clr-white: #fff;
        --clr-info-dark: #7d8da1;
        --clr-info-light: #dce1eb;
        --clr-dark: #363949;
        --clr-warnig: #ff4edc;
        --clr-light: rgba(132, 139, 200, 0.18);
        --clr-primary-variant: #111e88;
        --clr-dark-variant: #677483;
        --clr-color-background: #f6f6f9;

        --card-border-radius: 2rem;
        --border-radius-1: 0.4rem;
        --border-radius-2: 0.8rem;
        --border-radius-3: 1.2rem;

        --card-padding: 1.8rem;
        --padding-1: 1.2rem;
        --box-shadow: 0 2rem 3rem var(--clr-light);
      }

      /* dark theme */
      .dark-theme-variables {
        --clr-color-background: #181a1e;
        --clr-white: #202528;
        --clr-light: rgba(0, 0, 0, 0.4);
        --clr-dark: #edeffd;
        --clr-dark-variant: #677483;
        --box-shadow: 0 2rem 3rem var(--clr-light);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        border: 0;
        text-decoration: none;
        list-style: none;
        appearance: none;
      }

      body {
        width: 100vw;
        height: 100vh;
        font-size: 0.7rem;
        user-select: none;
        overflow-x: hidden;
        background: var(--clr-color-background);
        font-family: "Poppins", sans-serif;
      }

      .container {
        display: grid;
        width: 96%;
        gap: 1.8rem;
        grid-template-columns: 14rem auto 16rem;
        margin: 0 auto;
      }

      a {
        color: var(--clr-dark);
      }

      h1 {
        font-weight: 800;
        font-size: 2.8rem;
      }
      h2 {
        font-size: 1.4rem;
      }
      h3 {
        font-size: 0.87;
      }
      h4 {
        font-weight: 0.8rem;
      }
      h5 {
        font-size: 0.77rem;
      }
      small {
        font-size: 0.75rem;
      }
      .profile-photo img {
        width: 2.8rem;
        height: 2.8rem;
        overflow: hidden;
        border-radius: 50%;
      }
      .text-muted {
        color: var(--clr-info-dark);
      }
      p {
        color: var(--clr-dark-variant);
      }
      b {
        color: var(--clr-dark);
      }
      .primary {
        color: var(--clr-primary);
      }

      .success {
        color: var(--clr-success);
      }

      .danger {
        color: var(--clr-danger);
      }

      .warning {
        color: var(--clr-warnig);
      }

      /* aside */
      aside {
        height: 100vh;
      }
      aside .top {
        background: var(--clr-white);
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-top: 1.4rem;
      }

      aside .logo {
        display: flex;
        gap: 1rem;
      }
      aside .logo img {
        width: 2rem;
        height: 2rem;
      }
      aside .top div.close span {
        display: none;
      }

      /* ===================
 Sidebar
 ================== */

      aside .sidebar {
        background: var(--clr-white);
        display: flex;
        flex-direction: column;
        height: 86vh;
        position: relative;
        top: 1rem;
      }

      aside h3 {
        font-weight: 500;
      }

      aside .sidebar a {
        display: flex;
        color: var(--clr-info-dark);
        margin-left: 2rem;
        gap: 1rem;
        align-items: center;
        height: 3.3rem;
        transition: all 0.1s ease;
      }

      aside .sidebar a span {
        font-size: 1.6rem;
        transition: all 0.3s ease-in-out;
      }

      aside .sidebar a:last-child {
        position: absolute;
        bottom: 1rem;
        width: 100%;
      }

      aside .sidebar a.active {
        background-color: var(--clr-light);
        color: var(--clr-primary);
        margin-left: 0;
        border-left: 5px solid var(--clr-primary);
        margin-left: calc(1rem - 3px);
      }
      aside .sidebar a:hover span {
        margin-left: 1rem;
      }

      aside .sidebar a span.msg_count {
        background-color: var(--clr-danger);
        color: var(--clr-white);
        padding: 2px 5px;
        font-size: 11px;
        border-radius: var(--border-radius-1);
      }

      /* ----------------------------
 --------- Main--------------
 ------------------------------ */

      main {
        margin-top: 1.4rem;
        width: auto;
      }
      main input {
        background-color: transparent;
        border: 0;
        outline: 0;
        color: var(--clr-dark);
      }

      main .date {
        display: inline-block;
        background: var(--clr-white);
        border-radius: var(--border-radius-1);
        margin-top: 1rem;
        padding: 0.5rem 1.6rem;
      }

      main .insights {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1.6rem;
      }
      main .insights > div {
        background-color: var(--clr-white);
        padding: var(--card-padding);
        border-radius: var(--card-border-radius);
        margin-top: 1rem;
        box-shadow: var(--box-shadow);
        transition: all 0.3s ease;
      }

      main .insights > div:hover {
        box-shadow: none;
      }
      main .insights > div span {
        background: coral;
        padding: 0.5rem;
        border-radius: 50%;
        color: var(--clr-white);
        font-size: 2rem;
      }

      main .insights > div.expenses span {
        background: var(--clr-danger);
      }
      main .insights > div.income span {
        background: var(--clr-success);
      }

      main .insights > div .middle {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      main .insights > div .middle h1 {
        font-size: 1.6rem;
      }

      main h1 {
        color: var(--clr-dark);
      }
      main .insights h1 {
        color: var(--clr-dark);
      }
      main .insights h3 {
        color: var(--clr-dark);
      }
      main .insights p {
        color: var(--clr-dark);
      }
      main .insights h3 {
        color: var(--clr-dark);
      }

      main .insights .progress {
        position: relative;
        height: 68px;
        width: 68px;
        border-radius: 50px;
      }

      main .insights svg {
        height: 150px;
        width: 150px;
        position: absolute;
        top: 0;
      }

      main .insights svg circle {
        fill: none;
        stroke: var(--clr-primary);
        transform: rotate(270, 80, 80);
        stroke-width: 5;
      }
      main .insights .sales svg circle {
        stroke-dashoffset: 0;
        stroke-dasharray: 150;
      }

      main .insights .expenses svg circle {
        stroke-dashoffset: 10;
        stroke-dasharray: 150;
      }
      main .insights .sales svg circle {
        stroke-dashoffset: 0;
        stroke-dasharray: 150;
      }
      main .insights .income svg circle {
        stroke: var(--clr-success);
      }

      main .insights .progress .number {
        position: absolute;
        top: 5%;
        left: 5%;
        height: 100%;
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      /* recent order */

      main .recent_order {
        margin-top: 2rem;
      }

      main .recent_order h2 {
        color: var(--clr-dark);
      }

      main .recent_order h2 {
        margin-bottom: 0.8rem;
      }
      main .recent_order table {
        background: var(--clr-white);
        width: 100%;
        border-radius: var(--card-border-radius);
        padding: var(--card-padding);
        text-align: center;
        box-shadow: var(--box-shadow);
        transition: all 0.3s ease;
        color: var(--clr-dark);
      }
      main .recent_order table:hover {
        box-shadow: none;
      }

      main table tbody td {
        height: 3.8rem;
        border-bottom: 1px solid var(--clr-white);
        color: var(--clr-dark-variant);
      }
      main table tbody tr:last-child td {
        border: none;
      }

      main .recent_order a {
        text-align: center;
        display: block;
        margin: 1rem;
      }

      /*********************
Right Side
**********************/

      .right {
        margin-top: 1.4rem;
      }
      .right h2 {
        color: var(--clr-dark);
      }
      .right .top {
        display: flex;
        justify-content: start;
        gap: 2rem;
      }

      .right .top button {
        display: none;
      }

      .right .theme-toggler {
        background: var(--clr-white);
        display: flex;
        justify-content: space-between;
        height: 1.6rem;
        width: 4.2rem;
        cursor: pointer;
        border-radius: var(--border-radius-1);
      }
      .right .theme-toggler span {
        font-size: 1.2rem;
        width: 50%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .right .theme-toggler span.active {
        background: var(--clr-primary);
        color: #fff;
      }

      .right .top .profile {
        display: flex;
        gap: 2rem;
        text-align: right;
      }
      .right .info h3 {
        color: var(--clr-dark);
      }
      .right .item h3 {
        color: var(--clr-dark);
      }

      /* recent update */

      .right .recent_updates {
        margin-top: 1rem;
        margin-left: -20px;
      }
      .right .recent_updates .updates {
        background-color: var(--clr-white);
        padding: var(--card-padding);
        border-radius: var(--card-border-radius);
        box-shadow: var(--box-shadow);
        transition: all 0.3s ease;
      }
      .right .recent_updates .updates:hover {
        box-shadow: none;
      }
      .right .recent_updates .update {
        display: grid;
        grid-template-columns: 2.6rem auto;
        gap: 1rem;
        margin-bottom: 1rem;
      }

      /* see analytics */

      .right .sales-analytics {
        margin-top: 2rem;
      }
      .right .sales-analytics h2 {
        margin-bottom: 0.8rem;
      }
      .right .sales-analytics .item {
        background-color: var(--clr-white);
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 1rem;
        margin: 10px 0;
        width: 100%;
        margin-bottom: 0.8rem;
        padding: 1.4rem var(--card-padding);
        border-radius: var(--border-radius-3);
        box-shadow: var(--box-shadow);
      }
      .right .sales-analytics .item:hover {
        box-shadow: none;
      }

      .right .sales-analytics .item .icon {
        padding: 0.6rem;
        color: var(--clr-white);
        border-radius: 50%;
        height: 50px;
        width: 50px;
        line-height: 50px;
        align-items: center;
        background: coral;
      }
      .right .sales-analytics .item:nth-child(3) .icon {
        background: var(--clr-success);
      }
      .right .sales-analytics .item:nth-child(4) .icon {
        background: var(--clr-danger);
      }

      .right .sales-analytics .item .right {
        margin-left: 15px;
        display: flex;
        justify-content: space-around;
      }
      .right .sales-analytics .item .right h3 {
        color: var(d);
      }

      .add_product div {
        display: flex;
        height: 60px;
        width: 100%;
        text-align: center;
        justify-content: center;
        align-items: center;
        border: 2px dashed;
        color: var(--clr-dark-variant);
        margin-bottom: 40px;
      }

      /* **********8
MEDIA QUERY
****************/

      @media screen and (max-width: 1200px) {
        .container {
          width: 94%;
          grid-template-columns: 7rem auto 14rem;
        }
        aside .sidebar h3 {
          display: none;
        }
        aside .sidebar a {
          width: 5.6rem;
        }
        aside .sidebar a:last-child {
          position: relative;
          margin-top: 1.8rem;
        }
        main .insights {
          display: grid;
          grid-template-columns: repeat(1, 1fr);
        }
      }

      /* ****************
MEDIA QUERY PHONE
************************/

      @media screen and (max-width: 768px) {
        .container {
          width: 100%;
          grid-template-columns: repeat(1, 1fr);
        }

        aside {
          position: fixed;
          width: 18rem;
          z-index: 3;
          height: 100vh;
          background-color: var(--clr-white);
          display: none;
          left: -110px;
          animation: menuLeft 0.3s ease forwards;
        }

        @keyframes menuLeft {
          to {
            left: 0;
          }
        }

        aside .logo h2 {
          display: inline;
        }
        aside .sidebar h3 {
          display: inline;
        }
        aside .sidebar a {
          width: 100%;
          height: 3.4rem;
        }
        aside .top div.close span {
          display: inline;
          position: absolute;
          right: 0;
          margin-right: 30px;
          font-size: 35px;
          cursor: pointer;
        }

        .right .top {
          position: fixed;
          top: 0;
          left: 0;
          display: flex;
          justify-content: center;
          align-items: center;
          padding: 0 0.8rem;
          background: var(--clr-white);
          height: 4.6rem;
          width: 100%;
          z-index: 2;
          box-shadow: 0 1rem 1rem var(--clr-light);
          margin: 0;
        }

        main .insights {
          display: grid;
          grid-template-columns: repeat(1, 1fr);
          gap: 1.6rem;
          padding: 40px;
        }
        main .recent_order {
          padding: 30px;
          margin: 0 auto;
        }

        .right .profile {
          position: absolute;
          left: 70%;
        }

        .right .top .theme-toggler {
          width: 4.4rem;
          position: absolute;
          left: 50%;
        }
        .right .profile .info {
          display: none;
        }

        .right .top button {
          display: inline-block;
          background: transparent;
          cursor: pointer;
          color: var(--clr-dark);
          position: absolute;
          left: 1rem;
        }
        .right .recent_order {
          padding: 0 30px;
        }
        .right .recent_updates {
          padding: 0 40px;
        }
        .right .sales-analytics {
          padding: 0 40px;
        }
        .right .add_product {
          padding: 0 40px;
          margin-bottom: 40px;
        }
      }

      /* Your existing CSS styles remain here */

      /* Popup Form Styles */
      .popup-form {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 9999;
      }

      .form-container {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 80%; /* Adjusted width */
        max-width: 600px; /* Maximum width */
        background: linear-gradient(
          135deg,
          #3498db,
          #8e44ad
        ); /* Mixed background color */
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
      }

      .form-container h2 {
        font-size: 2rem;
        margin-bottom: 30px;
        color: #fff;
      }

      .form-group {
        margin-bottom: 30px;
      }

      .form-group label {
        display: block;
        font-size: 1.2rem;
        font-weight: bold;
        margin-bottom: 10px;
        color: #fff;
      }

      .form-group input {
        width: 100%;
        padding: 15px;
        font-size: 1.2rem;
        border: none;
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.8); /* Semi-transparent white */
        transition: background-color 0.3s ease;
      }

      .form-group input:focus {
        outline: none;
        background-color: rgba(255, 255, 255, 1); /* Fully opaque white */
      }

      .close-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 2rem;
        color: #fff;
        cursor: pointer;
        transition: color 0.3s ease;
      }

      .close-btn:hover {
        color: #f1c40f; /* Yellow color on hover */
      }

      button[type="submit"] {
        display: inline-block;
        padding: 15px 30px;
        font-size: 1.2rem;
        color: #fff;
        background-color: #e74c3c; /* Red color for save button */
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      button[type="submit"]:hover {
        background-color: #c0392b; /* Darker red color on hover */
      }

      /* Styling for payment status */
      select#paymentStatus {
        appearance: none;
        padding: 10px 20px;
        font-size: 1.2rem;
        border: 2px solid var(--clr-primary);
        border-radius: 5px;

        color: var(--clr-primary);
        cursor: pointer;
        transition: border-color 0.3s ease;
      }

      select#paymentStatus:hover,
      select#paymentStatus:focus {
        border-color: var(--clr-success);
        outline: none;
      }

      /* Other CSS styles remain unchanged */
    </style>
  </head>

  <body>
    <div class="container">
      <aside>
        <div class="top">
          <div class="logo">
            <h2>My<span class="danger">Company</span></h2>
          </div>
          <div class="close" id="close_btn">
            <span class="material-symbols-sharp"> close </span>
          </div>
        </div>
        <!-- end top -->
        <div class="sidebar">
          <a href="#" class="active">
            <span class="material-symbols-sharp">grid_view</span>
            <h3>Dashbord</h3>
          </a>
          <a href="#" id="openFormBtn">
            <span class="material-symbols-sharp">person_outline </span>
            <h3>Add New Employee</h3>
          </a>
          <a href="#" id="openDeleteEmployeeFormBtn">
            <span class="material-symbols-sharp">delete_outline </span>
            <h3>Delete Employee</h3>
          </a>
          <a href="#" onClick="loadEmployees()">
            <span class="material-symbols-sharp">edit </span>
            <h3>Show Employees</h3>
          </a>
          <a href="#" id="openViewEmployeeFormBtn">
            <span class="material-symbols-sharp">visibility</span>
            <h3>Search Employee</h3>
          </a>
          <a href="#" onClick="signout()">
            <span class="material-symbols-sharp">logout </span>
            <h3>logout</h3>
          </a>
        </div>
      </aside>

      <main>
        <h1>HR Department</h1>

        <div class="date">
          <input type="date" />
        </div>

        <div class="insights">
          <!-- start seling -->
          <div class="sales">
            <span class="material-symbols-sharp">trending_down</span>
            <div class="middle">
              <div class="left">
                <h3>Total Employees</h3>
                <h1>{{totalEmployees[0]}}</h1>
              </div>
              <div class="progress">
                <svg>
                  <circle r="30" cy="40" cx="40"></circle>
                </svg>
                <div class="number">
                  <p>100%</p>
                </div>
              </div>
            </div>
            <small>Experienced</small>
          </div>
          <!-- end seling -->
          <!-- start expenses -->
          <div class="expenses">
            <span class="material-symbols-sharp">local_mall</span>
            <div class="middle">
              <div class="left">
                <h3>Total Manager</h3>
                <h1>{{totalManagers[0]}}</h1>
              </div>
              <div class="progress">
                <svg>
                  <circle r="30" cy="40" cx="40"></circle>
                </svg>
                <div class="number">
                  <p>{{ 100*(totalManagers[0]/totalEmployees[0]) }}%</p>
                </div>
              </div>
            </div>
            <small>Percentage</small>
          </div>
          <!-- end seling -->
          <!-- start seling -->
          <div class="income">
            <span class="material-symbols-sharp">stacked_line_chart</span>
            <div class="middle">
              <div class="left">
                <h3>Female Employees</h3>
                <h1>{{totalFemales[0]}}</h1>
              </div>
              <div class="progress">
                <svg>
                  <circle r="30" cy="40" cx="40"></circle>
                </svg>
                <div class="number">
                  <p>{{100*(totalFemales[0]/totalEmployees[0])}}%</p>
                </div>
              </div>
            </div>
            <small>Percentage</small>
          </div>
          <!-- end seling -->
        </div>
        <!-- end insights -->
        <div class="recent_order"></div>
      </main>

      <div class="right">
        <div class="top">
          <button id="menu_bar">
            <span class="material-symbols-sharp">menu</span>
          </button>

          <div class="theme-toggler">
            <span class="material-symbols-sharp active">light_mode</span>
            <span class="material-symbols-sharp">dark_mode</span>
          </div>
          <div class="profile">
            <div class="info">
              <p><b>{{user_name}}</b></p>
              <p>HR {{position}}</p>
              <small class="text-muted"></small>
            </div>
            <div class="profile_pic"></div>
          </div>
          <!-- end profile -->
        </div>
        <!-- end top -->
      </div>
    </div>
    <!-- end container -->

    <!-- Add Employee Popup Form -->
    <div class="popup-form" id="addEmployeeForm">
      <div class="form-container">
        <span class="close-btn" id="closeEmployeeForm">&times;</span>
        <h2>Add New Employee</h2>
        <form id="employeeForm" action="/add_employee" method="POST">
          <div class="form-group">
            <label for="employeeFirstName">First Name:</label>
            <input
              type="text"
              id="employeeFirstName"
              name="employeeFirstName"
              required
            />
          </div>

          <div class="form-group">
            <label for="employeeEmail">Email:</label>
            <input
              type="text"
              id="employeeEmail"
              name="employeeEmail"
              required
            />
          </div>
          <div class="form-group">
            <label for="employeeGender">Gender:</label>
            <select id="employeeGender" name="employeeGender">
              <option value="Male">Male</option>
              <option value="Female">Female</option>
              <option value="Other">Other</option>
            </select>
          </div>
          <div class="form-group">
            <label for="employeeDepartment">Department:</label>
            <input
              type="text"
              id="employeeDepartment"
              name="employeeDepartment"
            />
          </div>
          <div class="form-group">
            <label for="employeePosition">Position:</label>
            <input type="text" id="employeePosition" name="employeePosition" />
          </div>
          <div class="form-group">
            <label for="employeeSalary">Salary:</label>
            <input type="text" id="employeeSalary" name="employeeSalary" />
          </div>
          <button type="submit">Save</button>
        </form>
      </div>
    </div>

    <!-- Delete Employee Popup Form -->
<div class="popup-form" id="deleteEmployeeForm">
  <div class="form-container">
    <span class="close-btn" id="closeDeleteEmployeeForm">&times;</span>
    <h2>Delete Employee</h2>
    <form id="deleteEmployeeForm" action="/delete_employee" method="POST">
      <div class="form-group">
        <label for="deleteEmployeeID">Employee ID:</label>
        <input type="text" id="deleteEmployeeID" name="deleteEmployeeID" required />
      </div>
      <button type="submit">Delete</button>
    </form>
  </div>
</div>


    <!-- View Employee Popup Form -->
    <div class="popup-form" id="viewEmployeeForm">
      <div class="form-container">
        <span class="close-btn" id="closeViewEmployeeForm">&times;</span>
        <h2>View Employee Details</h2>
        <form id="viewEmployeeForm">
          <div class="form-group">
            <label for="viewEmployeeID">Employee ID:</label>
            <input
              type="text"
              id="viewEmployeeID"
              name="viewEmployeeID"
              required
            />
          </div>
          <button type="submit">View</button>
        </form>
        <!-- Display employee details here -->
      </div>
    </div>

    <script>
document.addEventListener("DOMContentLoaded", function () {
  const deleteEmployeeForm = document.getElementById("deleteEmployeeForm");
  const closeDeleteEmployeeFormBtn = document.getElementById("closeDeleteEmployeeForm");

  if (deleteEmployeeForm && closeDeleteEmployeeFormBtn) {
    closeDeleteEmployeeFormBtn.addEventListener("click", function (event) {
      event.preventDefault();
      deleteEmployeeForm.style.display = "none";
    });

    deleteEmployeeForm.addEventListener("submit", function (event) {
      event.preventDefault();
      const deleteEmployeeID = document.getElementById("deleteEmployeeID");

      if (deleteEmployeeID) {
        const employeeID = deleteEmployeeID.value;
        fetch("/delete_employee", {
          method: "POST",
          headers: {
            "Content-Type": "application/x-www-form-urlencoded",
          },
          body: new URLSearchParams({ deleteEmployeeID: employeeID }), // Use the correct parameter name
        })
          .then((response) => {
            if (response.ok) {
              window.location.href = "/hr/dashboard";
            } else {
              console.error("Failed to delete employee");
              alert("Failed to delete employee. Please try again.");
            }
          })
          .catch((error) => {
            console.error("Error:", error);
            alert("An error occurred. Please try again later.");
          });
      } else {
        console.error("deleteEmployeeID element not found");
      }
    });
  } else {
    console.error("deleteEmployeeForm or closeDeleteEmployeeFormBtn not found");
  }
});


        // JavaScript for handling form submission
      document.addEventListener("DOMContentLoaded", function () {
        // Get the form element
        const form = document.getElementById("employeeForm");

        // Add event listener for form submission
        form.addEventListener("submit", function (event) {
          event.preventDefault(); // Prevent default form submission

          // Get form data
          const formData = new FormData(form);

          // Send form data to backend route using fetch API
          fetch("/add_employee", {
            method: "POST",
            body: formData,
          })
            .then((response) => {
              if (response.ok) {
                // If the response is ok, redirect to the manager dashboard or any other page
                window.location.href = "/hr/dashboard";
              } else {
                // Handle error response
                console.error("Failed to add employee");
                // Optionally, display an error message to the user
                alert("Failed to add employee. Please try again.");
              }
            })
            .catch((error) => {
              console.error("Error:", error);
              // Optionally, display an error message to the user
              alert("An error occurred. Please try again later.");
            });
        });
      });
      // Function to load employee records
      function loadEmployees() {
        document.querySelector(".recent_order").innerHTML = `
              <h2>Employee Records</h2>
              <table>
                  <thead>
                      <tr>
                          <th>EmployeeID</th> 
                          <th>Department</th>
                          <th>Position</th>
                          <th>Salary</th>
                          <th>Email</th>
                          <th>Actions</th>
                      </tr>
                  </thead>
                  <tbody>
                      {% for row in dataEmployees %}
                      <tr>
                          <td>{{ row[0] }}</td>
                          <td>{{ row[5] }}</td>
                          <td>{{ row[6] }}</td>
                          <td>{{ row[7] }}</td>
                          <td>{{ row[9] }}</td>
                          <td class="primary">Update</td>
                      </tr>
                      {% endfor %}
                  </tbody>
              </table>
          `;
      }

      const addEmployeeForm = document.getElementById("addEmployeeForm");
      const openFormBtn = document.getElementById("openFormBtn");
      const closeEmployeeFormBtn = document.getElementById("closeEmployeeForm");
      const employeeForm = document.getElementById("employeeForm");

      openFormBtn.addEventListener("click", () => {
        addEmployeeForm.style.display = "block";
      });

      closeEmployeeFormBtn.addEventListener("click", () => {
        addEmployeeForm.style.display = "none";
      });

      employeeForm.addEventListener("submit", (e) => {
        e.preventDefault();
        // Get employee details from the form
        const employeeName = document.getElementById("employeeName").value;
        const employeeEmail = document.getElementById("employeeEmail").value;
        const employeePhone = document.getElementById("employeePhone").value;
        const employeeAddress =
          document.getElementById("employeeAddress").value;

        // Perform validation and save employee logic here

        // For demonstration purposes, just log the employee details
        console.log("Employee Name:", employeeName);
        console.log("Employee Email:", employeeEmail);
        console.log("Employee Phone:", employeePhone);
        console.log("Employee Address:", employeeAddress);

        // Close the form after saving
        addEmployeeForm.style.display = "none";
      });

      // JavaScript code for opening, closing, and handling the view employee form

      // Get references to necessary elements
      const viewEmployeeForm = document.getElementById("viewEmployeeForm");
      const openViewEmployeeFormBtn = document.getElementById(
        "openViewEmployeeFormBtn"
      );
      const closeViewEmployeeFormBtn = document.getElementById(
        "closeViewEmployeeForm"
      );

      // Function to open the view employee form
      openViewEmployeeFormBtn.addEventListener("click", () => {
        viewEmployeeForm.style.display = "block";
      });

      // Function to close the view employee form
      closeViewEmployeeFormBtn.addEventListener("click", () => {
        viewEmployeeForm.style.display = "none";
      });

      // Function to handle form submission
      viewEmployeeForm.addEventListener("submit", (e) => {
        e.preventDefault();
        // Get employee ID from the form
        const employeeID = document.getElementById("viewEmployeeID").value;

        // Perform logic to fetch employee details from server/database
        // For demonstration purposes, just log the employee ID
        console.log("View Employee Details for ID:", employeeID);

        // Close the form after submission
        viewEmployeeForm.style.display = "none";
      });

      const deleteEmployeeForm = document.getElementById("deleteEmployeeForm");
      const openDeleteEmployeeFormBtn = document.getElementById(
        "openDeleteEmployeeFormBtn"
      );
      const closeDeleteEmployeeFormBtn = document.getElementById(
        "closeDeleteEmployeeForm"
      );

      // Function to open the delete employee form
      openDeleteEmployeeFormBtn.addEventListener("click", () => {
        deleteEmployeeForm.style.display = "block";
      });

      // Function to close the delete employee form
      closeDeleteEmployeeFormBtn.addEventListener("click", () => {
        deleteEmployeeForm.style.display = "none";
      });

      // Function to handle form submission
      deleteEmployeeForm.addEventListener("submit", (e) => {
        e.preventDefault();
        // Get employee ID from the form
        const employeeID = document.getElementById("deleteEmployeeID").value;

        // Perform logic to delete employee using employeeID
        // For demonstration purposes, just log the employee ID
        console.log("Delete Employee with ID:", employeeID);

        // Close the form after submission
        deleteEmployeeForm.style.display = "none";
      });

      // Function to handle click event on anchor tags
      function handleAnchorClick(event) {
        // Prevent default link behavior
        event.preventDefault();

        // Remove 'active' class from all anchor tags
        const allLinks = document.querySelectorAll(".sidebar a");
        allLinks.forEach((link) => {
          link.classList.remove("active");
        });

        // Add 'active' class to the clicked anchor tag
        event.currentTarget.classList.add("active");
      }

      // Attach click event listener to all anchor tags in the sidebar
      const sidebarLinks = document.querySelectorAll(".sidebar a");
      sidebarLinks.forEach((link) => {
        link.addEventListener("click", handleAnchorClick);
      });

      // Add any additional functionality or event listeners as needed for your HR department dashboard
    </script>
  </body>
</html>
